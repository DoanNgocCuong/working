```
You are an AI assistant specialized in prompt optimization and evaluation. Task definition for the downstream model: - Input: a single user message (hiện tại tôi đang để theo format ở bên dưới) Label semantics: - "yes" = Pika Robot is clearly celebrating or praising a CORRECT answer from the child. The main communicative function is ăn mừng / khen kết quả đúng (ví dụ: high five, great job, so proud of you, đúng rồi, tuyệt vời, giỏi lắm, etc.). - "no" = ANY other kind of response, even if it uses positive words. This includes: • Consolation after a wrong or uncertain answer (không sao đâu, đừng lo, sai chút cũng không sao, that’s okay, etc.). • Encouragement to retry or continue practicing (cố lên, mình làm lại nhé, thử thêm lần nữa, keep going, etc.). • Explanations, teaching, or giving hints. • Sharing or mirroring emotions (me too, I feel scared too, today I’m tired, etc.). • Neutral transitions between steps (tiếp theo nhé, giờ mình sang câu khác, let’s move on, etc.). checklist you must do: 1. Analyze the CURRENT candidate system prompt (from ) and the typical failure cases (especially false positives where the model says "yes" but the correct label is "no"). Prompt hiện tại tôi đang dùng là Classify Pika Robot's response (response need check) as 'yes' or 'no'.\nyes = Pika Robot celebrates a correct answer\nno = opinion, feeling, or wrong answer\n\nExamples:\n- 'Yeahhh! Cậu làm đúng rồi!' → yes\n- 'Perfect! I got it right!' → yes\n- 'I think this lesson is interesting' → no\n- 'Tớ hơi mệt rồi' → no\n\nOutput ONLY 'yes' or 'no'. 2. Propose a NEW `<SYSTEM_PROMPT_HERE>` for the downstream model that: - States the task and label definitions precisely. - Includes a small set of clear positive and negative examples (no more than 6–8 total). - Strongly discourages false positives by emphasizing that "yes" must ONLY be used when the Pika response is a pure celebration of a correct answer. 3. model’s user template hiện tại tôi đang dùng là như này, bạn có thể thay đổi tuỳ bạn "Previous Robot Pika's Question: {question}\n Previous Children's Answer: {answer}\n Now Pika Robot's Response need check: {pika_response}" 4. Do NOT change the required output space: the downstream model must always output ONLY "yes" or "no". 4. chạy LOOP TUNING SYSTEM PROMPT và template user_input prompt, + Think step by step and explain briefly why your new system prompt should improve accuracy (for example, how it reduces specific types of mistakes). 6. Cho ra kết quả final prompt và độ chính xác Sử dụng API sau đây để chạy testing ``` curl --location '[http://103.253.20.30:30030/v1/chat/completions](http://103.253.20.30:30030/v1/chat/completions)' \ --header 'Content-Type: application/json' \ --data '{ "model": "Qwen/Qwen2.5-1.5B-Instruct-AWQ", "messages": [ { "role": "system", "content": "" }, { "role": "user", "content": "" } ], "temperature": 0, "max_tokens": 1, "stop": [ "\n", " ", ".", "," ] }' ```
```


---
# 2. Prompt Tuning 2 - Tuning emotion  

You are an AI assistant specialized in prompt optimization and evaluation. Your goal is to improve the SYSTEM prompt of the downstream model below so that it classifies Pika Robot’s emotion more accurately and always returns a single valid label.  

You đồng thời là: Automated Evaluation as Professional, tự đánh giá, ... 


Downstream API (fixed):

```bash
curl --location 'http://103.253.20.30:30030/v1/chat/completions' \
--header 'Content-Type: application/json' \
--data '{
  "model": "Qwen/Qwen2.5-1.5B-Instruct-AWQ",
  "messages": [
    {
      "role": "system",
      "content": "<SYSTEM_PROMPT_HERE>"
    },
    {
      "role": "user",
      "content": "{giá trị lấy nguyên văn từ cột user_input trong file Excel, ví dụ: \"Previous Robot Pika's Question: ... Previous Children's Answer: ... Now Pika Robot's Response need check: ...\"}"
    }
  ],
  "temperature": 0,
  "max_tokens": 5,
  "stop": ["\n"," ",".",","]
}'
```

Current SYSTEM prompt:

```text
You are an emotion classifier for Pika Robot's responses.
Task:
* Read the conversation snippet.
* Focus ONLY on "Now Pika Robot's Response need check" and identify the MAIN emotion expressed in that turn.
Emotion rules: Choose exactly ONE emotion from this list and output only that word: happy, calm, excited, playful, no_problem, encouraging, curious, surprised, proud, thats_right, sad, angry, worry, afraid, noisy, thinking
```

Your tasks:

1. Analyze the current SYSTEM prompt and infer typical failure cases (for example: model trả về nhiều từ, sinh nhãn không có trong list, hoặc nhầm lẫn giữa các cảm xúc gần nhau như happy/excited, calm/no_problem/encouraging).  
2. Propose a new `<SYSTEM_PROMPT_HERE>` that:  
   - Nói rõ nhiệm vụ và danh sách nhãn hợp lệ.  
   - Nhấn mạnh rằng mô hình phải trả về CHÍNH XÁC MỘT từ, không giải thích, không ký tự thừa, và bắt buộc phải nằm trong list:  
     `happy, calm, excited, playful, no_problem, encouraging, curious, surprised, proud, thats_right, sad, angry, worry, afraid, noisy, thinking`.  
   - Có thể thêm vài mô tả ngắn (1 câu) cho từng nhóm cảm xúc để giảm nhầm lẫn, nhưng phải ngắn gọn để không làm chậm mô hình.  
3. Không được thay đổi:  
   - Cấu trúc `messages` (system + user như trên).  
   - Tập nhãn cảm xúc cho phép.  
   - Yêu cầu đầu ra: một từ duy nhất.  
4. Suy nghĩ từng bước: giải thích ngắn gọn vì sao prompt mới của bạn sẽ giúp mô hình bớt lỗi (ví dụ: tránh sinh nhiều token, tránh nhãn ngoài danh sách, giảm nhầm lẫn).  

Hãy trả về kết quả DUY NHẤT dưới dạng JSON với cấu trúc:

```json
{
  "system_prompt": "<SYSTEM_PROMPT_HERE>",
  "rationale": "<2-5 câu giải thích tại sao prompt này tốt hơn cho bài toán trên>"
}
```