## 1.1 Về pyproject và package.json
## `setup.py` để làm gì?

### 1. Context: `pyproject.toml` vs `setup.py`

Với `pyproject.toml` + `setuptools.build_meta`:
- Metadata (name, version, dependencies) được đọc từ `pyproject.toml`
- `setup.py` không cần thiết để define metadata
- Nhưng `setup.py` vẫn có thể override commands (install, develop, build, etc.)

### 2. Vai trò của `setup.py` trong project này

`setup.py` chỉ để override install commands để tự động cài Playwright browsers:

```python
# Override install command
class PostInstallCommand(install):
    def run(self):
        install.run(self)  # Install package từ pyproject.toml
        install_playwright_browsers()  # ✅ Auto-install browsers
```

### 3. Flow khi chạy `pip install -e .`

```
1. pip đọc pyproject.toml → install dependencies (bao gồm playwright package)
2. pip tìm setup.py → thấy PostInstallCommand
3. Chạy PostInstallCommand.run():
   - Install package (từ pyproject.toml)
   - Sau đó chạy install_playwright_browsers()
   - → Tự động chạy: playwright install chromium
```

### 4. Có thể bỏ `setup.py` không?

Có, nếu:
- Chỉ cần install playwright package (không cần auto-install browsers)
- Hoặc chấp nhận install browsers thủ công: `playwright install chromium`

Không, nếu:
- Muốn tự động install browsers khi `pip install -e .`
- Muốn developer không cần nhớ chạy `playwright install chromium`

### 5. Tóm tắt

| File | Vai trò |
|------|---------|
| `pyproject.toml` | Define metadata, dependencies (bao gồm playwright package) |
| `setup.py` | Override install command để auto-install Playwright browsers |

## Kết luận

`setup.py` chỉ để tự động cài Playwright browsers sau khi install package. Nếu không cần auto-install, có thể xóa `setup.py` và install browsers thủ công.

Bạn muốn:
1. Giữ `setup.py` để auto-install browsers?
2. Hoặc xóa `setup.py` và install browsers thủ công?


Tóm tắt những gì sẽ được cài đặt:


[2 tools called]


## Tóm tắt: Những gì sẽ được cài đặt

Khi chạy `pip install -e .` hoặc `pip install .`:

### 1. Từ `pyproject.toml` (dependencies)

Tất cả packages trong `dependencies` list, bao gồm:
- Playwright Python package (`playwright>=1.40.0`) — Python library
- Tất cả dependencies khác (fastapi, langchain, torch, ...)

### 2. Từ `setup.py` (post-install hook)

Sau khi install packages xong, tự động chạy:
```bash
python -m playwright install chromium
```

→ Download Chromium browser binaries (~100-200MB) vào:
- Windows: `%USERPROFILE%\AppData\Local\ms-playwright\`
- Linux/Mac: `~/.cache/ms-playwright/`

## Tóm tắt

| Component | Nguồn | Kích thước | Mục đích |
|-----------|-------|------------|----------|
| **Playwright Python package** | `pyproject.toml` dependencies | ~10-20MB | Python library để control browser |
| **Chromium browser binaries** | `setup.py` post-install hook | ~100-200MB | Browser executable để Playwright chạy |

## Kết quả

Sau khi `pip install -e .`:
- Playwright Python package đã được install
- Chromium browser binaries đã được download
- Có thể dùng Playwright ngay mà không cần chạy `playwright install chromium` thủ công

## Lưu ý

- Lần đầu install sẽ mất vài phút để download Chromium
- Nếu auto-install fail, có thể chạy thủ công: `playwright install chromium`
- Chỉ install Chromium (không phải tất cả browsers: Firefox, WebKit)

Tóm lại: `pyproject.toml` cài Playwright package, `setup.py` tự động download Chromium browser binaries.