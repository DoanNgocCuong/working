## 1.1  t·∫°o b·∫£ng: studio_bot_workflow trong postgres

```

```

## 1.2 Xo√° to√†n b·ªô d·ªØ li·ªáu c·ªßa b·∫£ng 
```
TRUNCATE TABLE studio_bot_workflow;
```

`TRUNCATE TABLE studio_bot_workflow RESTART IDENTITY;`


- `TRUNCATE TABLE ...;` ‚Üí id **kh√¥ng** v·ªÅ l·∫°i 1.
    
- `TRUNCATE TABLE ... RESTART IDENTITY;` ‚Üí id **s·∫Ω** v·ªÅ l·∫°i 1 (n·∫øu sequence kh√¥ng c√≥ gi√° tr·ªã start kh√°c).

## 1.3 C√°ch l·∫•y l·∫°i history c·ªßa lesson_... trong postgres

# ‚úÖ **1. B·∫£ng MySQL b·∫°n cung c·∫•p**

|T√™n c·ªôt|MySQL Type|Ghi ch√∫|
|---|---|---|
|id|int, auto_increment|PRIMARY KEY|
|name|varchar(128)||
|description|varchar(2048)||
|scenario|json||
|create_at|bigint||
|update_at|bigint||
|is_loading|tinyint(1)|0/1|

---

# üü¶ **2. T∆∞∆°ng ƒë∆∞∆°ng trong PostgreSQL**

| MySQL            | PostgreSQL                            | Gi·∫£i th√≠ch                      |
| ---------------- | ------------------------------------- | ------------------------------- |
| `int`            | `INTEGER`                             | gi·ªëng nhau                      |
| `auto_increment` | `SERIAL` ho·∫∑c `GENERATED AS IDENTITY` | auto tƒÉng                       |
| `varchar(128)`   | `VARCHAR(128)`                        | gi·ªëng nhau                      |
| `varchar(2048)`  | `VARCHAR(2048)`                       | gi·ªëng nhau                      |
| `json`           | `JSONB` (khuy√™n d√πng) ho·∫∑c `JSON`     | JSONB nhanh h∆°n                 |
| `bigint`         | `BIGINT`                              | gi·ªëng                           |
| `tinyint(1)`     | **BOOLEAN** (0/1) ho·∫∑c `SMALLINT`     | PostgreSQL **kh√¥ng c√≥ tinyint** |


```
CREATE TABLE lesson_studio_bot (
    id SERIAL PRIMARY KEY,
    name VARCHAR(128),
    description VARCHAR(2048),
    scenario JSONB,
    create_at BIGINT,
    update_at BIGINT,
    is_loading BOOLEAN DEFAULT FALSE
);
```

```
ALTER TABLE lesson_studio_bot ADD COLUMN system_prompt TEXT;
```
```
ALTER TABLE lesson_studio_bot 
    ADD COLUMN IF NOT EXISTS system_prompt TEXT,
    ADD COLUMN IF NOT EXISTS provider_name VARCHAR(255),
    ADD COLUMN IF NOT EXISTS generation_params JSONB,
    ADD COLUMN IF NOT EXISTS system_extraction_variables JSONB,
    ADD COLUMN IF NOT EXISTS system_prompt_generation TEXT,
    ADD COLUMN IF NOT EXISTS system_extraction_profile JSONB,
    ADD COLUMN IF NOT EXISTS format_output TEXT,
    ADD COLUMN IF NOT EXISTS data_excel JSONB;
```

---
# 1.4 # L·∫•y to√†n b·ªô c·ªôt v√† b·∫£ng trong ƒë√¢y 

```
SELECT 
    table_name, 
    column_name
FROM 
    information_schema.columns
WHERE 
    table_schema = 'public'
ORDER BY 
    table_name, 
    ordinal_position;
```


