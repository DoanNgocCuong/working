
# 1. Docker compose 

## 1.1 Remove docker ho·∫∑c remove port 

```bash
docker stop redis
docker remove redis
```

```bash
*5. Ki·ªÉm tra process n√†o ƒëang s·ª≠ d·ª•ng port 30000:**

	sudo lsof -i :30000

(¬†"Super User Do¬†- List Open Files - Internet¬†connections on port 9433" (D√πng quy·ªÅn admin¬†ƒë·ªÉ li·ªát k√™¬†process n√†o ƒëang s·ª≠ d·ª•ng port¬†9433))
**6. Kill process theo PID (n·∫øu c√≥):**

sudo kill -9 <PID>


**7. Ho·∫∑c kill t·∫•t c·∫£ process tr√™n port 30000:**

sudo fuser -k 30000/tcp

```

# 1. **Ph√¢n bi·ªát restart: always v√† restart: unless-stopped trong Docker Compose:**

| Thu·ªôc t√≠nh                                                 | **always**                                                         | **unless-stopped**                                                           |
| ---------------------------------------------------------- | ------------------------------------------------------------------ | ---------------------------------------------------------------------------- |
| Khi container l·ªói (exited b·∫•t th∆∞·ªùng)                      | Lu√¥n t·ª± ƒë·ªông restart                                               | Lu√¥n t·ª± ƒë·ªông restart                                                         |
| Khi container down do l·ªánh `docker restart` ho·∫∑c OS reboot | T·ª± ƒë·ªông start l·∫°i khi Docker ho·∫∑c server kh·ªüi ƒë·ªông l·∫°i             | T·ª± ƒë·ªông start l·∫°i khi Docker ho·∫∑c server kh·ªüi ƒë·ªông l·∫°i                       |
| Khi **b·∫°n t·ª± stop b·∫±ng `docker stop ...`**                 | **L·∫ßn sau Docker ho·∫∑c OS restart v·∫´n t·ª± ƒë·ªông start l·∫°i container** | **L·∫ßn sau Docker ho·∫∑c OS restart th√¨ container KH√îNG t·ª± ƒë·ªông kh·ªüi ƒë·ªông l·∫°i** |
| Khi d√πng `docker compose down`                             | Kh√¥ng c√≤n container n√™n kh√¥ng restart                              | Kh√¥ng c√≤n container n√™n kh√¥ng restart                                        |

**T√≥m g·ªçn:**

- `restart: always`: Container lu√¥n t·ª± start l·∫°i m·ªçi tr∆∞·ªùng h·ª£p (tr·ª´ khi b·ªã x√≥a).
    
- `restart: unless-stopped`: Container s·∫Ω lu√¥n start l·∫°i, **tr·ª´ khi b·∫°n t·ª´ng stop th·ªß c√¥ng**, khi ƒë√≥ s·∫Ω KH√îNG t·ª± start l·∫°i n·ªØa cho ƒë·∫øn khi b·∫°n t·ª± ch·∫°y l·∫°i n√≥.
    

**Khi n√™n d√πng c√°i n√†o?**

- N·∫øu mu·ªën container lu√¥n ƒë∆∞·ª£c Docker ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông, k·ªÉ c·∫£ sau stop th·ªß c√¥ng, h√£y d√πng `always`.
    
- N·∫øu ch·ªâ mu·ªën container restart l·∫°i khi l·ªói ho·∫∑c OS reboot, **KH√îNG ph·∫£i sau khi b·∫°n ch·ªß ƒë·ªông stop** (v√≠ d·ª• ƒë·ªÉ b·∫£o tr√¨), ch·ªçn `unless-stopped`.
    

1. [https://www.perplexity.ai/search/redis-hoc-ve-redis-HtFbAlR9QPWeKOnOA7dRiw](https://www.perplexity.ai/search/redis-hoc-ve-redis-HtFbAlR9QPWeKOnOA7dRiw)


# 2. C√¢u h·ªèi v·ªÅ: --remove-orphans v√† v·∫•n ƒë·ªÅ khi deploy 2 file docker compose k√®m --remove-orphans th√¨ b·ªã m·∫•t 1 c√°i docker compose kia => Gi·∫£i ph√°p: ƒë·∫∑t project name cho t·ª´ng file docker compose 
  
@deploy/  
  
Khi m√¨nh ch·∫°y deploy docker compose 2 file ri√™ng ·ªü trong c√πng 1 th∆∞ m·ª•c l√† @docker-compose.prod.yaml v√† @docker-compose.redis.yaml  
  
th√¨ n√≥ b√°o l√†: WARN[0090] Found orphan containers ([redisinsight redis]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.  
  
  
√Ω nghƒ©a ƒëi·ªÅu n√†y l√† g√¨? V√¨ n·∫øu t√¥i th√™m --remove-orphans th√¨ n√≥ l·∫°i b·ªã m·∫•t c√°i c·ªßa docker compose kia

## √ù nghƒ©a c·ªßa warning message

**Orphan containers** l√† nh·ªØng containers ƒëang ch·∫°y nh∆∞ng kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong file docker-compose hi·ªán t·∫°i. Trong tr∆∞·ªùng h·ª£p c·ªßa b·∫°n:

- Khi ch·∫°y `docker-compose.prod.yaml`, Docker Compose ch·ªâ bi·∫øt v·ªÅ service `api`
- Nh∆∞ng n√≥ ph√°t hi·ªán c√≥ containers `redis` v√† `redisinsight` ƒëang ch·∫°y trong c√πng project
- V√¨ nh·ªØng containers n√†y kh√¥ng ƒë∆∞·ª£c khai b√°o trong `docker-compose.prod.yaml`, n√™n ch√∫ng ƒë∆∞·ª£c coi l√† "orphan"

## T·∫°i sao `--remove-orphans` kh√¥ng ph·∫£i gi·∫£i ph√°p t·ªët

Khi b·∫°n d√πng `--remove-orphans`, Docker Compose s·∫Ω x√≥a t·∫•t c·∫£ containers kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong file hi·ªán t·∫°i, bao g·ªìm c·∫£ `redis` v√† `redisinsight` t·ª´ file kia.

## Gi·∫£i ph√°p t·ªët nh·∫•t: S·ª≠ d·ª•ng project name ri√™ng bi·ªát

Thay v√¨ ƒë·ªÉ Docker Compose t·ª± ƒë·ªông t·∫°o project name (d·ª±a tr√™n t√™n th∆∞ m·ª•c), h√£y ch·ªâ ƒë·ªãnh project name ri√™ng cho m·ªói file:


[2 tools called]

## C√°ch ch·∫°y sau khi c·∫≠p nh·∫≠t

B√¢y gi·ªù b·∫°n c√≥ th·ªÉ ch·∫°y t·ª´ng file ƒë·ªôc l·∫≠p m√† kh√¥ng g·∫∑p warning:

```bash
# Ch·∫°y Redis services
docker-compose -f docker-compose.redis.yaml up -d

# Ch·∫°y API service  
docker-compose -f docker-compose.prod.yaml up -d
```

## L·ª£i √≠ch c·ªßa gi·∫£i ph√°p n√†y

1. **T√°ch bi·ªát ho√†n to√†n**: M·ªói project ƒë∆∞·ª£c qu·∫£n l√Ω ƒë·ªôc l·∫≠p
2. **Kh√¥ng c√≥ orphan containers**: M·ªói project ch·ªâ qu·∫£n l√Ω containers c·ªßa ri√™ng m√¨nh
3. **D·ªÖ d√†ng qu·∫£n l√Ω**: C√≥ th·ªÉ start/stop t·ª´ng service ri√™ng bi·ªát
4. **Kh√¥ng c·∫ßn `--remove-orphans`**: Kh√¥ng c√≤n warning message

## L∆∞u √Ω v·ªÅ networking

N·∫øu API service c·∫ßn k·∫øt n·ªëi ƒë·∫øn Redis, b·∫°n c·∫ßn c·∫•u h√¨nh external network ho·∫∑c s·ª≠ d·ª•ng host networking. Hi·ªán t·∫°i hai project n√†y s·∫Ω c√≥ network ri√™ng bi·ªát.

B·∫°n c√≥ mu·ªën t√¥i c·∫•u h√¨nh network ƒë·ªÉ API c√≥ th·ªÉ k·∫øt n·ªëi ƒë·∫øn Redis kh√¥ng?



# 3. V·ªÅ network c·ªßa docker compose ? v√† best practices 

- Khi kh√¥ng khai b√°o g√¨ ph·∫ßn¬†`networks`¬†·ªü cu·ªëi file, Docker Compose t·ª± ƒë·ªông t·∫°o m·ªôt m·∫°ng m·∫∑c ƒë·ªãnh c√≥ t√™n¬†`[projectname]_default`¬†v·ªõi ki·ªÉu¬†`bridge`¬†cho c·∫£ ·ª©ng d·ª•ng.[](https://minhnv2306.github.io/2020/04/21/Docker-Networking-in-Compose/)
    
- T·∫•t c·∫£ c√°c service trong file Compose s·∫Ω tham gia v√†o m·∫°ng n√†y v√† c√≥ th·ªÉ giao ti·∫øp l·∫´n nhau qua t√™n container.[](https://docs.docker.com/compose/how-tos/networking/)
    
- Vi·ªác khai b√°o ph·∫ßn¬†`networks`¬†·ªü cu·ªëi ch·ªâ c·∫ßn thi·∫øt khi mu·ªën d√πng custom network (t·ª± ƒë·∫∑t subnet, gateway, driver ƒë·∫∑c bi·ªát, ho·∫∑c d√πng external network).[](https://viblo.asia/p/docker-networking-nhung-khai-niem-va-cach-su-dung-co-ban-gGJ59P2JlX2)
    
- N·∫øu v·∫´n khai b√°o custom network m√† service kh√¥ng ƒë∆∞·ª£c g√°n v√†o, n√≥ v·∫´n d√πng default network, c√≤n m·∫°ng custom s·∫Ω kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng.


1. [https://viblo.asia/p/docker-compose-file-co-gi-EvbLbxnP4nk](https://viblo.asia/p/docker-compose-file-co-gi-EvbLbxnP4nk)
2. [https://demanejar.github.io/posts/Docker/](https://demanejar.github.io/posts/Docker/)
3. [https://viblo.asia/p/docker-networking-nhung-khai-niem-va-cach-su-dung-co-ban-gGJ59P2JlX2](https://viblo.asia/p/docker-networking-nhung-khai-niem-va-cach-su-dung-co-ban-gGJ59P2JlX2)
4. [https://tuyendung.evotek.vn/roadmap-docker-quan-ly-ung-dung-da-container-voi-docker-compose/](https://tuyendung.evotek.vn/roadmap-docker-quan-ly-ung-dung-da-container-voi-docker-compose/)
5. [https://minhnv2306.github.io/2020/04/21/Docker-Networking-in-Compose/](https://minhnv2306.github.io/2020/04/21/Docker-Networking-in-Compose/)
6. [https://docs.docker.com/compose/how-tos/networking/](https://docs.docker.com/compose/how-tos/networking/)
7. [https://forums.docker.com/t/set-default-network-name-for-compose/36779](https://forums.docker.com/t/set-default-network-name-for-compose/36779)
8. [https://www.alibabacloud.com/blog/599917](https://www.alibabacloud.com/blog/599917)
9. [https://2coffee.dev/bai-viet/series-ve-docker-trong-thuc-hanh-va-san-xuat-network-trong-docker](https://2coffee.dev/bai-viet/series-ve-docker-trong-thuc-hanh-va-san-xuat-network-trong-docker)
10. [https://ttth.tlu.edu.vn/docker-compose-va-nhung-kien-thuc-co-ban](https://ttth.tlu.edu.vn/docker-compose-va-nhung-kien-thuc-co-ban)

# 4.  Name network (thay v√¨ t·ª± ƒë·ªông b·ªã ƒë·∫∑t t√™n th√†nh: folder name-default => th√¨ m√¨nh ch·ªß ƒë·ªông ƒë·∫∑t t√™n cho n√≥) v√† v·∫•n ƒë·ªÅ h·∫øt d·∫£i subnet v√† v·∫•n ƒë·ªÅ 2 docker compose kh·ªüi t·∫°o c√πng subnet 

```
=> CACHED [intent-api 8/10] RUN pip3 install --no-cache-dir --upgrade pip && pip3 install --no-cache-dir -r /app/requi 0.0s => CACHED [intent-api 9/10] COPY src/ /app/src/ 0.0s => CACHED [intent-api 10/10] RUN mkdir -p /app/src/logs 0.0s => [intent-api] exporting to image 0.0s => => exporting layers 0.0s => => writing image sha256:f82813ab1604d9c58868f6d27b9ac37fdf15a01eb3c227088b45a42362d255f4 0.0s => => naming to docker.io/library/miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation-intent-api 0.0s [+] Running 1/0 ‚úò Network miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network Error 0.0s failed to create network miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network: Error response from daemon: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network Œ∏73¬∞ [ubuntu@mgc-dev2-3090:~/truc_ai/MiniProd_NLP2_IntentClassification_MappingFastResponse_T1_2025_StepUpEducation/src] master(+10/-4)* ¬± L·ªói g√¨ ƒë√¢y nh·ªâ
```

## 1. V·∫•n ƒë·ªÅ g·∫∑p ph·∫£i

### L·ªói ch√≠nh

```
failed to create network miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network: 
Error response from daemon: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network
```

### Tri·ªáu ch·ª©ng

- Docker Compose kh√¥ng th·ªÉ t·∫°o custom network m·ªõi
- Container build th√†nh c√¥ng nh∆∞ng kh√¥ng th·ªÉ start do l·ªói network
- L·ªói x·∫£y ra li√™n t·ª•c d√π ƒë√£ th·ª≠ docker network prune

### Nguy√™n nh√¢n g·ªëc r·ªÖ

Docker daemon ƒë√£ c·∫°n ki·ªát c√°c d·∫£i IP kh·∫£ d·ª•ng do c√≥ qu√° nhi·ªÅu networks ƒëang t·ªìn t·∫°i tr√™n h·ªá th·ªëng.

## 2. Ki·ªÉm tra c√°c m·∫°ng hi·ªán t·∫°i

### Network inventory

H·ªá th·ªëng hi·ªán c√≥ **30+ Docker networks** ƒëang ho·∫°t ƒë·ªông:

```bash
$ docker network ls
NETWORK ID     NAME                                                                   DRIVER    SCOPE
1ee83a85e17e   ai-agent-coach_robot-ai-workflow-network-master                        bridge    local
01684692a642   ai-agent-master_robot-ai-workflow-network-master                       bridge    local
22a276825d4a   ai-agent-noti_robot-ai-workflow-network-master                         bridge    local
b4815173bfb5   ai-agent-router-dev_robot-ai-workflow-network-master                   bridge    local
# ... v√† 25+ networks kh√°c
```

```bash
docker network ls -q | xargs -n1 docker network inspect --format '{{.Name}}: {{range .IPAM.Config}}{{.Subnet}} (gw {{.Gateway}}){{end}}'

```

```
Œ∏74¬∞ [ubuntu@mgc-dev2-3090:~/cuong_dn/robot-lesson-workflow/utils/UI] manual-refactor-agent-registry(+9/-4)+* ¬± docker network ls -q | xargs -n1 docker network inspect --format '{{.Name}}: {{range .IPAM.Config}}{{.Subnet}} (gw {{.Gateway}}){{end}}'
ai-agent-coach_robot-ai-workflow-network-master: 192.168.160.0/20 (gw 192.168.160.1)
ai-agent-master_robot-ai-workflow-network-master: 172.22.0.0/16 (gw 172.22.0.1)
ai-agent-noti_robot-ai-workflow-network-master: 172.24.0.0/16 (gw 172.24.0.1)
ai-agent-router-dev_robot-ai-workflow-network-master: 192.168.224.0/20 (gw 192.168.224.1)
ai-agent-router_robot-ai-workflow-network-master: 192.168.144.0/20 (gw 192.168.144.1)
ai_service_default: 172.23.0.0/16 (gw 172.23.0.1)
bridge: 172.17.0.0/16 (gw 172.17.0.1)
deploy_default: 172.31.0.0/16 (gw 172.31.0.1)
deployapi_server_default: 192.168.192.0/20 (gw 192.168.192.1)
deployproduction_intent_network: 192.168.128.0/20 (gw 192.168.128.1)
dify_default_dev: 192.168.176.0/20 (gw 192.168.176.1)
dify_ssrf_proxy_network_dev: 192.168.112.0/20 (gw 192.168.112.1)
docker_default: 172.25.0.0/16 (gw 172.25.0.1)
docker_ssrf_proxy_network: 192.168.240.0/20 (gw 192.168.240.1)
host: 
kokoro_default: 172.26.0.0/16 (gw 172.26.0.1)
langfuse_default: 170.28.0.0/24 (gw )
langgraph_n8n_langgraph-n8n-network-master: 172.19.0.0/16 (gw 172.19.0.1)
legal_rag: 192.168.80.0/20 (gw 192.168.80.1)
lesson-builder-backend_web: 170.26.0.0/24 (gw )
ls_ai_automation_default: 172.28.0.0/16 (gw 172.28.0.1)
milvus: 172.21.0.0/16 (gw 172.21.0.1)
miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network: 10.20.0.0/24 (gw 10.20.0.1)
n8n_n8n-services-network-master: 172.18.0.0/16 (gw 172.18.0.1)
none: 
personalized-ai-coach-dev_robot-ai-workflow-network-master: 192.168.64.0/20 (gw 192.168.64.1)
personalized-ai-coach_robot-ai-workflow-network-master: 192.168.32.0/20 (gw 192.168.32.1)
prod_deploy_default: 172.29.0.0/16 (gw 172.29.0.1)
robot-ai-lesson_robot-ai-workflow-network-master: 192.168.48.0/20 (gw 192.168.48.1)
robot-ai-service_default: 172.27.0.0/16 (gw 172.27.0.1)
robot-ai-workflow-dev_robot-ai-workflow-network-dev: 172.30.0.0/16 (gw 172.30.0.1)
robot-ai-workflow_robot-ai-workflow-network-master: 192.168.0.0/20 (gw 192.168.0.1)
robot-lesson-workflow-dev_studio-ai-platform-workflow-network-master: 192.168.16.0/20 (gw 192.168.16.1)
tool_su_table_to_json_default: 192.168.208.0/20 (gw 192.168.208.1)
vioedu_vioedu-generator-math-network: 192.168.96.0/20 (gw 192.168.96.1)
voicetrans_voicetrans_app: 172.20.0.0/16 (gw 172.20.0.1)
Œ∏74¬∞ [ubuntu@mgc-dev2-3090:~/cuong_dn/robot-lesson-workflow/utils/UI] manual-refactor-agent-registry(+9/-4)+* ¬± 
```
### IP Range Analysis

T·ª´ `ip route` output, c√°c d·∫£i IP ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng:

**172.x.x.x networks:**

- 172.17.0.0/16 (docker0 - default bridge)
- 172.18.0.0/16 ƒë·∫øn 172.31.0.0/16 (14 networks)

**192.168.x.x networks:**

- 192.168.0.0/20 ƒë·∫øn 192.168.240.0/20 (16 networks)

**170.x.x.x networks:**

- 170.26.0.0/24, 170.28.0.0/24

**T·ªïng c·ªông: 32 active networks** s·ª≠ d·ª•ng h·∫ßu h·∫øt c√°c d·∫£i IP m·∫∑c ƒë·ªãnh c·ªßa Docker.

## 3. Gi·∫£i ph√°p ƒë∆∞·ª£c √°p d·ª•ng

### B∆∞·ªõc 1: Cleanup c∆° b·∫£n

```bash
# Th·ª≠ d·ªçn d·∫πp networks kh√¥ng s·ª≠ d·ª•ng
docker network prune -f
# K·∫øt qu·∫£: Kh√¥ng c√≥ network n√†o b·ªã x√≥a (t·∫•t c·∫£ ƒë·ªÅu ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng)
```

### B∆∞·ªõc 2: Ch·ªânh s·ª≠a Network Configuration

#### Docker Compose Configuration m·ªõi:

```yaml
version: '3.8'

services:
  intent-api:
    build: .
    container_name: intent-classification-api
    ports:
      - "20012:20012"
    env_file:
      - .env
    volumes:
      # Model persistence
      - ./src/exported_models:/app/src/exported_models
      - ./src/trained_models:/app/src/trained_models
      # Response files
      - ./src/intent_reponse.json:/app/src/intent_reponse.json
      - ./src/intent_reponse_v2.json:/app/src/intent_reponse_v2.json
      - ./src/fixed_response.json:/app/src/fixed_response.json
      # Logs
      - ./logs:/app/src/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:20012/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s
    deploy:
      resources:
        limits:
          memory: 4G
        reservations:
          memory: 2G
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    runtime: nvidia
    networks:
      - intent-network

networks:
  intent-network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.10.0.0/24
          gateway: 10.10.0.1
```

#### C√°c d·∫£i n√†o c√≥ th·ªÉ ƒë∆∞·ª£c d√πng 

- D·∫£i:¬†`10.10.0.0/24`¬†‚Üí IP usable:¬†`10.10.0.1`¬†‚Üí¬†`10.10.0.254`
- Gateway (c·ªïng ra m·∫°ng) ph·∫£i l√† m·ªôt ƒë·ªãa ch·ªâ IP h·ª£p l·ªá¬†**trong kho·∫£ng 10.10.0.1 ƒë·∫øn 10.10.0.254** 
- B√¨nh th∆∞·ªùng ng∆∞·ªùi ta hay ch·ªçn .1 v√¨ ti·ªán nh·ªõ (10.10.0.1), 
- Gateway kh√¥ng ƒë∆∞·ª£c l√†¬†`10.10.0.0`¬†(network), kh√¥ng ƒë∆∞·ª£c l√†¬†`10.10.0.255`¬†(broadcast) v√† mi·ªÖn kh√¥ng tr√πng v·ªõi c√°c container kh√°c. 
https://docs.docker.com/reference/compose-file/networks/
https://www.warp.dev/terminus/docker-compose-networks

---
# so·∫πt 24 

```
networks:
  name-network:               # t√™n m·∫°ng b·∫°n t·∫°o
    driver: bridge              # ki·ªÉu m·∫°ng: bridge (m·∫∑c ƒë·ªãnh c·ªßa Docker)
    ipam:                       # IP Address Management - qu·∫£n l√Ω d·∫£i IP
      driver: default
      config:
        - subnet: 10.200.0.0/24 # d·∫£i m·∫°ng (CIDR) d√πng cho network n√†y
          gateway: 10.200.0.1   # ƒë·ªãa ch·ªâ gateway (c·ªïng m·∫∑c ƒë·ªãnh) c·ªßa network
```

- B·∫°n ƒëang t·∫°o m·ªôt m·∫°ng Docker t√™n **`intent-network`**.
    
- M·∫°ng n√†y c√≥ d·∫£i IP ri√™ng: `10.200.0.0/24`.
    
- Docker s·∫Ω c·∫•p ph√°t IP cho container trong d·∫£i n√†y (v√≠ d·ª• `10.200.0.2`, `10.200.0.3`‚Ä¶).
    
- Gateway (`10.200.0.1`) l√† ‚Äúc·∫ßu n·ªëi‚Äù ƒë·ªÉ container ƒëi ra internet ho·∫∑c giao ti·∫øp v·ªõi host.

---

`/24` (so·∫πt 24) l√† c√°ch vi·∫øt t·∫Øt trong **CIDR notation** (Classless Inter-Domain Routing) ƒë·ªÉ ch·ªâ ƒë·ªô d√†i **subnet mask**.

- `/24` nghƒ©a l√† **24 bit ƒë·∫ßu ti√™n** c·ªßa ƒë·ªãa ch·ªâ IP d√πng ƒë·ªÉ x√°c ƒë·ªãnh **network**, c√≤n l·∫°i **8 bit cu·ªëi** ƒë·ªÉ ƒë√°nh s·ªë host.
    
- Subnet mask t∆∞∆°ng ·ª©ng l√† **255.255.255.0**.
    
- Nh∆∞ v·∫≠y, m·ªôt m·∫°ng `/24` c√≥ th·ªÉ ch·ª©a t·ªëi ƒëa **256 ƒë·ªãa ch·ªâ IP** (t·ª´ `.0` ƒë·∫øn `.255`), trong ƒë√≥:
    
    - `.0` l√† ƒë·ªãa ch·ªâ network,
        
    - `.255` l√† ƒë·ªãa ch·ªâ broadcast,
        
    - c√≤n l·∫°i ~254 ƒë·ªãa ch·ªâ d√†nh cho host/container.
        

V√≠ d·ª•:

- `10.200.0.0/24` ‚Üí d·∫£i IP kh·∫£ d·ª•ng: `10.200.0.1` ƒë·∫øn `10.200.0.254`.
    
- `192.168.1.0/24` ‚Üí d·∫£i IP kh·∫£ d·ª•ng: `192.168.1.1` ƒë·∫øn `192.168.1.254`.
    

üëâ N·∫øu b·∫°n ƒë·ªÉ `/16` th√¨ s·∫Ω c√≥ 65,534 IP kh·∫£ d·ª•ng (qu√° r·ªông, d·ªÖ xung ƒë·ªôt).  
üëâ V·ªõi Docker, th∆∞·ªùng d√πng `/24` ƒë·ªÉ ƒë·ªß ch·ªó cho v√†i container nh∆∞ng kh√¥ng chi·∫øm nhi·ªÅu d·∫£i IP.


---
# 4. Ch√∫ √Ω v·∫•n ƒë·ªÅ: ch·ªìng l·∫•n subnet  


Kh√¥ng ƒë∆∞·ª£c. N·∫øu hai file Docker Compose khai b√°o hai network v·ªõi **c√πng m·ªôt subnet**, d√π gateway kh√°c, th√¨ Docker v·∫´n b√°o l·ªói "Pool overlaps with other one on this address space" v√† kh√¥ng cho ph√©p t·∫°o.[docker+2](https://docs.docker.com/reference/cli/docker/network/create/)

## Gi·∫£i th√≠ch

- Docker y√™u c·∫ßu c√°c network kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng c√°c subnet b·ªã tr√πng ho·∫∑c ch·ªìng l·∫•n nhau‚Äîeven n·∫øu gateway kh√°c, subnet v·∫´n l√† ph·∫°m vi ƒë·ªãa ch·ªâ IP n√™n s·∫Ω b·ªã l·ªói overlap.[thorsell+1](https://thorsell.io/2024/02/05/docker-network.html)
    
- Gateway ch·ªâ l√† ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh routing trong subnet, nh∆∞ng subnet th√¨ ƒë·∫°i di·ªán cho to√†n b·ªô d·∫£i ƒë·ªãa ch·ªâ m√† network qu·∫£n l√Ω. Vi·ªác tr√πng subnet s·∫Ω d·∫´n t·ªõi xung ƒë·ªôt NAT/routing, n√™n gateway kh√°c c≈©ng kh√¥ng ƒë∆∞·ª£c ph√©p.[stackoverflow+2](https://stackoverflow.com/questions/67674332/docker-network-bridge-overlapping-with-ip-addressing-used-for-the-vpn-clients-on)

- N·∫øu mu·ªën c√≥ hai network ri√™ng bi·ªát, ph·∫£i d√πng hai subnet kh√°c nhau, v√≠ d·ª•:
    
    - Network A: `10.10.0.0/24`
        
    - Network B: `10.20.0.0/24`
        
- Gateway c√≥ th·ªÉ ƒë·∫∑t t√πy √Ω trong m·ªói subnet (nh∆∞ng kh√¥ng ƒë∆∞·ª£c tr√πng subnet).
    

Docker s·∫Ω ch·ªâ cho ph√©p t·∫°o nhi·ªÅu network n·∫øu subnet ho√†n to√†n kh√¥ng ch·ªìng l·∫•n nhau, gateway kh√¥ng ·∫£nh h∆∞·ªüng t·ªõi ƒëi·ªÅu ki·ªán n√†y.[docker+2](https://docs.docker.com/reference/cli/docker/network/create/)

1. [https://docs.docker.com/reference/cli/docker/network/create/](https://docs.docker.com/reference/cli/docker/network/create/)
2. [https://thorsell.io/2024/02/05/docker-network.html](https://thorsell.io/2024/02/05/docker-network.html)
3. [https://stackoverflow.com/questions/67674332/docker-network-bridge-overlapping-with-ip-addressing-used-for-the-vpn-clients-on](https://stackoverflow.com/questions/67674332/docker-network-bridge-overlapping-with-ip-addressing-used-for-the-vpn-clients-on)
4. [https://forums.docker.com/t/docker-compose-multiple-networks/128718](https://forums.docker.com/t/docker-compose-multiple-networks/128718)
5. [https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects](https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects)
6. [https://www.reddit.com/r/docker/comments/ldkmry/how_to_run_two_docker_hosts_with_macvlan_on_the/](https://www.reddit.com/r/docker/comments/ldkmry/how_to_run_two_docker_hosts_with_macvlan_on_the/)
7. [https://docs.docker.com/compose/how-tos/networking/](https://docs.docker.com/compose/how-tos/networking/)
8. [https://www.netmaker.io/resources/docker-compose-network](https://www.netmaker.io/resources/docker-compose-network)
9. [https://github.com/moby/moby/issues/20179](https://github.com/moby/moby/issues/20179)
10. [https://docs.docker.com/engine/network/](https://docs.docker.com/engine/network/)
11. [https://github.com/moby/moby/issues/26912](https://github.com/moby/moby/issues/26912)
12. [https://forums.docker.com/t/network-with-255-255-255-255-as-subnet/79321](https://forums.docker.com/t/network-with-255-255-255-255-as-subnet/79321)
13. [https://stackoverflow.com/questions/50514275/docker-bridge-conflicts-with-host-network](https://stackoverflow.com/questions/50514275/docker-bridge-conflicts-with-host-network)
14. [https://philippmundhenk.github.io/Docker_IP_addresses/](https://philippmundhenk.github.io/Docker_IP_addresses/)


# 5. Summay Ph√¢n bi·ªát 2 lo·∫°i l·ªói tr√™n 

| Lo·∫°i l·ªói                 | Th√¥ng b√°o l·ªói                                                                                              | Nguy√™n nh√¢n                                                         | V√≠ d·ª• subnet                                                             | Gi·∫£i ph√°p                                                                                                                                                                                                                                                                                                                              |
| ------------------------ | ---------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| H·∫øt d·∫£i network kh·∫£ d·ª•ng | could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network | Docker ƒë√£ d√πng h·∫øt d·∫£i IP m·∫∑c ƒë·ªãnh ho·∫∑c c√°c subnet kh√¥ng c√≤n ƒë·ªß nh·ªè | C√≥ nhi·ªÅu m·∫°ng/16chi·∫øm g·∫ßn h·∫øt 172.x.x.x, 192.168.x.x m·∫∑c ƒë·ªãnh            | - D√πng m·ªôt subnet ho√†n to√†n m·ªõi ngo√†i v√πng ƒë√£ b·ªã Docker chi·∫øm h·∫øt (v√≠ d·ª• d√πng d·∫£i10.x.x.x/24thay v√¨ c√°c d·∫£i m·∫∑c ƒë·ªãnh) - X√≥a b·ªõt c√°c network kh√¥ng s·ª≠ d·ª•ng (docker network pruneho·∫∑cdocker network rm <network_name>) - M·ªü r·ªông/add th√™m pools kh·∫£ d·ª•ng trong/etc/docker/daemon.jsonv·ªõidefault-address-pools, r·ªìi restart Docker daemon |
| Ch·ªìng l·∫•n (overlap)      | Pool overlaps with other one on this address space                                                         | Hai network d√πng c√πng ho·∫∑c ch·ªìng l·∫•n subnet, d√π gateway kh√°c nhau   | A:10.10.0.0/24 B:10.10.0.0/24 Ho·∫∑c: A:10.10.0.0/16, B:10.10.1.0/24       | - ƒê·ªïi sang subnet/d·∫£i IP ch∆∞a b·ªã tr√πng ho·∫∑c ch·ªìng v·ªõi network n√†o kh√°c - Ki·ªÉm tra subnet c√°c network hi·ªán c√≥ tr∆∞·ªõc khi khai b√°o m·ªõi b·∫±ngdocker network ls,docker network inspect - X√≥a c√°c network kh√¥ng c√≤n c·∫ßn d√πng n·∫øu b·ªã tr√πng                                                                                                     |
D∆∞·ªõi ƒë√¢y l√† b·∫£ng **ph√¢n bi·ªát c√°c l·ªói network th∆∞·ªùng g·∫∑p v·ªõi Docker/Docker Compose** (h·∫øt d·∫£i subnet kh·∫£ d·ª•ng v√† ch·ªìng l·∫•n subnet) v·ªõi gi·∫£i ph√°p r√µ r√†ng:

| **Lo·∫°i l·ªói**                   | **Th√¥ng b√°o l·ªói**                                                                                                                                                              | **Nguy√™n nh√¢n**                                                                       | **V√≠ d·ª• subnet**                                                                             | **Gi·∫£i ph√°p**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Orphan containers**          | Found orphan containers for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up. | Service trong compose ƒëang ch·∫°y kh√¥ng c√≤n ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong compose file hi·ªán t·∫°i | C√≥ container `redis` ch·∫°y do compose file c≈©, nh∆∞ng file hi·ªán t·∫°i ch·ªâ c√≤n `api`              | - N√™n d√πng project name ri√™ng bi·ªát cho t·ª´ng docker compose file (`-p <name>` ho·∫∑c `name:` trong compose file).  <br>- Kh√¥ng n√™n d√πng `--remove-orphans` n·∫øu c√≤n mu·ªën gi·ªØ containers t·ª´ file compose kh√°c.  <br>- Start/stop t·ª´ng compose v·ªõi project name ƒë·ªÉ tr√°nh xung ƒë·ªôt v√† orphan                                                                                                                                                                                                                                                        |
| **H·∫øt d·∫£i network kh·∫£ d·ª•ng**   | could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network                                                                     | Docker ƒë√£ chi·∫øm h·∫øt c√°c d·∫£i IP m·∫∑c ƒë·ªãnh ho·∫∑c subnet nh·ªè c√≤n l·∫°i kh√¥ng ƒë·ªß              | Sau khi t·∫°o r·∫•t nhi·ªÅu m·∫°ng `/16` ki·ªÉu `172.x.x.x`, `192.168.x.x`                             | - ƒê·ªïi sang d·∫£i subnet kh√°c ho√†n to√†n, v√≠ d·ª• `10.x.x.x/24`, `100.x.x.x/24`, kh√¥ng n·∫±m trong c√°c pool ƒë√£ b·ªã chi·∫øm.  <br>- X√≥a b·ªõt c√°c Docker network kh√¥ng d√πng (`docker network prune` ho·∫∑c `docker network rm <network_name>`).  <br>- M·ªü r·ªông `default-address-pools` trong `/etc/docker/daemon.json`, r·ªìi restart Docker daemon ƒë·ªÉ c√≥ th√™m d·∫£i IP m·ªõi.                                                                                                                                                                                     |
| **Ch·ªìng l·∫•n subnet (overlap)** | Pool overlaps with other one on this address space                                                                                                                             | Hai network d√πng c√πng ho·∫∑c subnet b·ªã ch·ªìng l·∫•n nhau, d√π gateway kh√°c                  | A: `10.10.0.0/24`  <br>B: `10.10.0.0/24`  <br>Ho·∫∑c A: `10.10.0.0/16`,  <br>B: `10.10.1.0/24` | - ƒê·ªïi subnet/d·∫£i IP kh√°c h·∫≥n, kh√¥ng ch·ªìng l·∫•n v·ªõi b·∫•t c·ª© docker network hi·ªán c√≥ n√†o.  <br>- Ki·ªÉm tra c√°c m·∫°ng hi·ªán t·∫°i b·∫±ng `docker network ls`, `docker network inspect` ƒë·ªÉ tr√°nh b·ªã tr√πng.  <br>- N·∫øu ƒëang c√≥ m·∫°ng c≈© b·ªã th·ª´a ho·∫∑c kh√¥ng d√πng, h√£y x√≥a n√≥ tr∆∞·ªõc khi t·∫°o m·∫°ng m·ªõi ƒë·ªÉ tr√°nh overlap.<br>---<br>docker network ls -q \| xargs -n1 docker network inspect --format '{{.Name}}: {{range .IPAM.Config}}{{.Subnet}} (gw {{.Gateway}}){{end}}' \| grep '10.10.0.0/24'<br><br>---<br>docker network rm deploy_redis-network<br><br> |
|                                |                                                                                                                                                                                |                                                                                       |                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |


**L∆∞u √Ω:**

- Khi g·∫∑p l·ªói "h·∫øt d·∫£i network", ho√†n to√†n c√≥ th·ªÉ **d√πng subnet m·ªõi**, mi·ªÖn l√† subnet n√†y ch∆∞a b·ªã tr√πng ho·∫∑c n·∫±m ngo√†i c√°c d·∫£i pool ƒëang b·ªã l·∫•p ƒë·∫ßy b·ªüi docker network kh√°c.
    
- S·ª≠ d·ª•ng custom subnet nh∆∞ `10.x.x.x/24`, `100.x.x.x/24`‚Ä¶ l√† gi·∫£i ph√°p th·ª±c ti·ªÖn khi pool m·∫∑c ƒë·ªãnh c·ªßa Docker ƒë√£ h·∫øt.
    
- "Ch·ªìng l·∫•n" subnet l√† l·ªói v·ªÅ logic m·∫°ng Docker ‚Äî ch·ªâ m·ªôt subnet duy nh·∫•t ƒë∆∞·ª£c d√πng, d√π gateway c√≥ kh√°c nhau c≈©ng v·∫´n b·ªã b√°o l·ªói n·∫øu overlap.
    

B·∫£ng n√†y gi√∫p b·∫°n x√°c ƒë·ªãnh nhanh nguy√™n nh√¢n v√† gi·∫£i ph√°p cho c√°c l·ªói m·∫°ng ph·ªï bi·∫øn khi l√†m vi·ªác v·ªõi Docker Compose v√† Docker network!

---
# Example best practices 

```bash
# Project name ri√™ng cho API service
name: robot-workflow-project

services:
  api:
    build:
      context: ..
      dockerfile: ./deploy/Dockerfile.api
    container_name: robot-workflow-api
    restart: unless-stopped
    env_file:
      - .env
    environment:
      LOGGING_LEVEL: INFO
      ENVIRONMENT: local   # T·∫°m d√πng local ƒë·ªÉ t·∫Øt kafka ƒëi
      HOST: 0.0.0.0
    ports:
      - "${PORT-30000}:30000"
    networks:
      - robot-workflow-network

networks:
  robot-workflow-network:               # t√™n m·∫°ng b·∫°n t·∫°o
    driver: bridge              # ki·ªÉu m·∫°ng: bridge (m·∫∑c ƒë·ªãnh c·ªßa Docker)
    ipam:                       # IP Address Management - qu·∫£n l√Ω d·∫£i IP
      driver: default
      config:
        - subnet: 10.10.0.0/24 # d·∫£i m·∫°ng (CIDR) d√πng cho network n√†y
          gateway: 10.10.0.1   # ƒë·ªãa ch·ªâ gateway (c·ªïng m·∫∑c ƒë·ªãnh) c·ªßa network
```


```bash
# Project name ri√™ng cho Redis services
name: robot-redis-project

services:
  redis:
    image: redis:latest
    container_name: robot-redis
    restart: unless-stopped
    command: redis-server --requirepass "yourStrongPassword" --appendonly yes --bind 0.0.0.0
    volumes:
      - redis-data:/data
    ports:
      - "30004:6379"
    networks:
      - robot-redis-network

  redisinsight:
    image: redislabs/redisinsight:latest
    container_name: robot-redisinsight
    restart: unless-stopped
    ports:
      - "29999:8001"
    networks:
      - robot-redis-network

volumes:
  redis-data:

networks:
  robot-redis-network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.30.0.0/24
          gateway: 10.30.0.1
```


---
# BEST PRACTICES 


D∆∞·ªõi ƒë√¢y l√† **Best Practices to√†n di·ªán khi s·ª≠ d·ª•ng Docker Compose** d·ª±a tr√™n c√°c ti√™u chu·∫©n 2025:

## üîß **1. C·∫•u tr√∫c v√† Qu·∫£n l√Ω File**

## File Organization

text

`# S·ª≠ d·ª•ng version m·ªõi nh·∫•t (ho·∫∑c b·ªè qua version field) version: "3.9"  # ho·∫∑c kh√¥ng c·∫ßn khai b√°o # ƒê·∫∑t project name ri√™ng ƒë·ªÉ tr√°nh conflict name: my-project services:   app:    # Service configuration`

## Multiple Environment Files[nickjanetakis+1](https://nickjanetakis.com/blog/best-practices-around-production-ready-web-apps-with-docker-compose)

bash

`# Base configuration docker-compose.yml  # Environment-specific overrides  docker-compose.dev.yml docker-compose.prod.yml docker-compose.test.yml`

S·ª≠ d·ª•ng:

bash

`# Development docker-compose -f docker-compose.yml -f docker-compose.dev.yml up # Production docker-compose -f docker-compose.yml -f docker-compose.prod.yml up`

## üõ°Ô∏è **2. Security Best Practices**

## Container Security[gitguardian+2](https://blog.gitguardian.com/how-to-improve-your-docker-containers-security-cheat-sheet/)

text

`services:   app:    image: node:18-alpine  # S·ª≠ d·ª•ng official images    user: "1000:1000"      # Non-root user    read_only: true        # Read-only filesystem    security_opt:      - no-new-privileges:true  # NgƒÉn privilege escalation    cap_drop:      - ALL                # Drop t·∫•t c·∫£ capabilities    cap_add:      - NET_BIND_SERVICE   # Ch·ªâ add c·∫ßn thi·∫øt`

## Secrets Management[dokploy+1](https://dokploy.com/fr/blog/how-to-deploy-apps-with-docker-compose-in-2025)

text

`# Kh√¥ng hardcode secrets trong compose file services:   app:    environment:      - DB_PASSWORD_FILE=/run/secrets/db_password    secrets:      - db_password secrets:   db_password:    external: true`

## üìä **3. Resource Management v√† Performance**

## Resource Limits[cheatsheetseries.owasp+1](https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html)

text

`services:   app:    deploy:      resources:        limits:          memory: 1G          cpus: "0.5"        reservations:          memory: 512M          cpus: "0.25"`

## Health Checks[dev+1](https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi)

text

`services:   app:    healthcheck:      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]      interval: 30s      timeout: 10s      retries: 3      start_period: 60s`

## üåê **4. Networking Best Practices**

## Custom Networks[docker+1](https://docs.docker.com/compose/how-tos/networking/)

text

`services:   app:    networks:      - app-network  db:    networks:      - db-network      - app-network networks:   app-network:    driver: bridge  db-network:    driver: bridge    internal: true  # Database ch·ªâ internal access`

## Port Management

text

`services:   app:    ports:      - "127.0.0.1:3000:3000"  # Bind to localhost only    # Thay v√¨ expose t·∫•t c·∫£ interfaces:    # - "3000:3000"`

## üíæ **5. Volume v√† Data Management**

## Named Volumes[dev](https://dev.to/wallacefreitas/10-best-practices-for-writing-maintainable-docker-compose-files-4ca2)

text

`services:   db:    volumes:      - postgres_data:/var/lib/postgresql/data  # Named volume      - ./config:/etc/config:ro                 # Read-only mount volumes:   postgres_data:    driver: local`

## üèóÔ∏è **6. Service Configuration**

## Service Dependencies[dev](https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi)

text

`services:   db:    healthcheck:      test: ["CMD-SHELL", "pg_isready -U postgres"]         app:    depends_on:      db:        condition: service_healthy  # ƒê·ª£i DB healthy`

## Restart Policies

text

`services:   app:    restart: unless-stopped  # Recommended cho production     # restart: always          # Ch·ªâ d√πng khi c·∫ßn container lu√¥n ch·∫°y  # restart: "no"           # Development  # restart: on-failure     # Ch·ªâ restart khi container fail`

## üîç **7. Environment Variables**

## Environment Management[docker](https://docs.docker.com/compose/how-tos/environment-variables/best-practices/)

text

`services:   app:    env_file:      - .env.common      - .env.local    environment:      - NODE_ENV=production      - DATABASE_URL=${DATABASE_URL}  # Interpolation`

## üöÄ **8. Production Readiness**

## Image Best Practices[talent500+1](https://talent500.com/blog/modern-docker-best-practices-2025/)

text

`services:   app:    image: myapp:1.2.3        # Specific version tags    # Kh√¥ng d√πng: latest, :master         build:      context: .      dockerfile: Dockerfile.prod      target: production      # Multi-stage builds`

## Logging Configuration[dev](https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi)

text

`services:   app:    logging:      driver: "json-file"      options:        max-size: "10m"        max-file: "3"`

## üîß **9. Development vs Production**

## Development Override[reddit](https://www.reddit.com/r/docker/comments/13kxfjf/how_to_handle_dockercompose_for_production_and/)

text

`# docker-compose.dev.yml services:   app:    build:      target: development    volumes:      - .:/app              # Source code mounting      - /app/node_modules   # Anonymous volume    environment:      - NODE_ENV=development    command: npm run dev    # Development command`

## Production Override[reddit](https://www.reddit.com/r/docker/comments/13kxfjf/how_to_handle_dockercompose_for_production_and/)

text

`# docker-compose.prod.yml services:   app:    build:      target: production    restart: unless-stopped    read_only: true    security_opt:      - no-new-privileges:true`

## üìã **10. Monitoring v√† Debugging**

## Service Monitoring[dev](https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi)

text

`services:   app:    labels:      - "traefik.enable=true"      - "monitoring.enabled=true"`

## üö® **11. Common Pitfalls to Avoid**

- ‚ùå Kh√¥ng s·ª≠ d·ª•ng `latest` tag trong production
    
- ‚ùå Hardcode secrets trong compose file
    
- ‚ùå Ch·∫°y containers v·ªõi root user
    
- ‚ùå Kh√¥ng set resource limits
    
- ‚ùå Expose ports tr√™n t·∫•t c·∫£ interfaces (`0.0.0.0`)
    
- ‚ùå Kh√¥ng c√≥ health checks
    
- ‚ùå D√πng `--remove-orphans` m√† kh√¥ng hi·ªÉu r√µ h·∫≠u qu·∫£[stackoverflow](https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects)
    

## üìù **12. Commands hay s·ª≠ d·ª•ng**

bash

`# Development docker-compose up --build # Production  docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d # Monitoring docker-compose logs -f docker-compose ps docker-compose top # Cleanup docker-compose down --volumes --remove-orphans`

Nh·ªØng best practices n√†y gi√∫p ƒë·∫£m b·∫£o Docker Compose applications c·ªßa b·∫°n **secure, scalable, maintainable v√† production-ready**.[docker+2](https://docs.docker.com/compose/how-tos/production/)

1. [https://nickjanetakis.com/blog/best-practices-around-production-ready-web-apps-with-docker-compose](https://nickjanetakis.com/blog/best-practices-around-production-ready-web-apps-with-docker-compose)
2. [https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi](https://dev.to/rajeshgheware/docker-compose-advanced-techniques-a-comprehensive-guide-to-production-deployments-1goi)
3. [https://blog.gitguardian.com/how-to-improve-your-docker-containers-security-cheat-sheet/](https://blog.gitguardian.com/how-to-improve-your-docker-containers-security-cheat-sheet/)
4. [https://www.aikido.dev/blog/a-no-bs-docker-security-checklist-for-the-vulnerability-minded-developer](https://www.aikido.dev/blog/a-no-bs-docker-security-checklist-for-the-vulnerability-minded-developer)
5. [https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html](https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html)
6. [https://dokploy.com/fr/blog/how-to-deploy-apps-with-docker-compose-in-2025](https://dokploy.com/fr/blog/how-to-deploy-apps-with-docker-compose-in-2025)
7. [https://docs.docker.com/compose/how-tos/environment-variables/best-practices/](https://docs.docker.com/compose/how-tos/environment-variables/best-practices/)
8. [https://talent500.com/blog/modern-docker-best-practices-2025/](https://talent500.com/blog/modern-docker-best-practices-2025/)
9. [https://docs.docker.com/compose/how-tos/networking/](https://docs.docker.com/compose/how-tos/networking/)
10. [https://www.warp.dev/terminus/docker-compose-networks](https://www.warp.dev/terminus/docker-compose-networks)
11. [https://dev.to/wallacefreitas/10-best-practices-for-writing-maintainable-docker-compose-files-4ca2](https://dev.to/wallacefreitas/10-best-practices-for-writing-maintainable-docker-compose-files-4ca2)
12. [https://www.reddit.com/r/docker/comments/13kxfjf/how_to_handle_dockercompose_for_production_and/](https://www.reddit.com/r/docker/comments/13kxfjf/how_to_handle_dockercompose_for_production_and/)
13. [https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects](https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects)
14. [https://docs.docker.com/compose/how-tos/production/](https://docs.docker.com/compose/how-tos/production/)
15. [https://www.bunnyshell.com/blog/is-docker-compose-production-ready/](https://www.bunnyshell.com/blog/is-docker-compose-production-ready/)
16. [https://thinksys.com/devops/docker-best-practices/](https://thinksys.com/devops/docker-best-practices/)
17. [https://www.youtube.com/watch?v=T--X3v2pwtU](https://www.youtube.com/watch?v=T--X3v2pwtU)
18. [https://collabnix.com/10-essential-docker-best-practices-for-r-developers-in-2025/](https://collabnix.com/10-essential-docker-best-practices-for-r-developers-in-2025/)
19. [https://betterstack.com/community/guides/scaling-docker/docker-security-best-practices/](https://betterstack.com/community/guides/scaling-docker/docker-security-best-practices/)
20. [https://news.ycombinator.com/item?id=32484008](https://news.ycombinator.com/item?id=32484008)
21. [https://docs.docker.com/build/building/best-practices/](https://docs.docker.com/build/building/best-practices/)
22. [https://www.reddit.com/r/selfhosted/comments/1aoujuu/best_security_practices_for_docker_containers/](https://www.reddit.com/r/selfhosted/comments/1aoujuu/best_security_practices_for_docker_containers/)
23. [https://docs.docker.com/engine/security/](https://docs.docker.com/engine/security/)