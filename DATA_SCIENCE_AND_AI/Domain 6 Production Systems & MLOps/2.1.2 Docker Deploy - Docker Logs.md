# 1. Deploy Langflow 
```bash
docker run -p 7860:7860 langflowai/langflow:latest

docker stop langflow && docker rm langflow

# Chạy lại với port 30001
docker run -d \
  -p 30001:7860 \
  -e LANGFLOW_HOST=0.0.0.0 \
  --name langflow \
  --restart unless-stopped \
  langflowai/langflow:latest
```

2. Deploy Redis
# 2. Redis GUI: 

RedisInsight là một công cụ GUI trực quan giúp quản lý, phân tích và tối ưu hóa cơ sở dữ liệu Redis. Để sử dụng RedisInsight trên server, có thể triển khai theo các cách sau:

- RedisInsight có thể chạy dưới dạng ứng dụng desktop hoặc dưới dạng Docker container trên server.
- Cách phổ biến là chạy RedisInsight bằng Docker trên server để dễ dàng quản lý và truy cập từ xa qua trình duyệt web.

https://github.com/redis/RedisInsight


29999
```bash
docker run -d -p 29999:8001 --name redisinsight redislabs/redisinsight:latest
docker run -d -p 30005:8001 --name redisinsight redislabs/redisinsight:latest


docker logs -f redisinsight
docker stop redisinsight 
docker remove redisinsight
```

```bash
docker stop redisinsight && docker rm redisinsight
docker rmi redislabs/redisinsight:latest
docker pull redislabs/redisinsight:latest
docker run -d -p 29999:8001 --name redisinsight redislabs/redisinsight:latest

```
---
# Kiểm tra logs Docker



# 3.1 Lỗi: **ERR_CONNECTION_REFUSED**

Lỗi bạn đang gặp là **ERR_CONNECTION_REFUSED** khi truy cập RedisInsight qua trình duyệt. Dưới đây là các nguyên nhân phổ biến và cách kiểm tra, xử lý:

---

## Nguyên nhân thường gặp

1. **Container RedisInsight chưa chạy hoặc vừa bị crash**
    
2. **Sai port mapping Docker** (port ngoài không map đúng vào port 8001 trong container)
    
3. **RedisInsight chưa lên trên cổng ngoài (public IP)**, chỉ nghe localhost
    
4. **Firewall/server chặn cổng 29999**
    
5. **Docker cấu hình `--network=host` nhưng server không mở port public**
    

---

## Cách kiểm tra & xử lý

1. **Kiểm tra trạng thái container**
    
    bash
    
    `docker ps -a | grep redisinsight`
    
    - Đảm bảo trạng thái là `Up`
        
    - Kiểm tra cột `PORTS` phải có `0.0.0.0:29999->8001/tcp`
        
2. **Kiểm tra log container**
    
    bash
    
    `docker logs redisinsight`
    
    - Tìm các dòng báo lỗi hoặc crash
        
3. **Kiểm tra port server**
    
    bash
    
    `sudo netstat -tulpn | grep 29999`
    
    - Phải thấy port 29999 đang "LISTEN"
        
4. **Kiểm tra firewall**
    
    bash
    
    `sudo ufw status`
    
    - Phải thấy cổng 29999 mở (`ALLOW`)


# Check log docker 
```
 docker logs -f --tail 100 robot-ai-workflow-server-master

```


## cách để check xem có nhữung container name nào đang chạy và export ra cổng bao nhiêu

## 1. Xem tất cả container đang chạy với port info:

bash

```bash
docker ps
```

Hoặc để xem đầy đủ thông tin hơn:

bash

```bash
docker ps --format "table {{.Names}}\t{{.Image}}\t{{.Status}}\t{{.Ports}}"
```

## 2. Chỉ xem container names và ports:

bash

```bash
docker ps --format "table {{.Names}}\t{{.Ports}}"
```

## 3. Xem chi tiết port mapping của một container cụ thể:

bash

```bash
docker port <container_name_or_id>
```

---

Dựa trên output của bạn, tôi thấy có **4 containers** liên quan đến port 9404:

### Container đang bind port 9404 trên host:
```
studio-ai-platform-lesson-server-master    0.0.0.0:9404->8000/tcp, :::9404->8000/tcp
```
**Container này đang thực sự "chiếm" port 9404 trên host**, map vào port 8000 bên trong container.

### Các containers khác chỉ expose port 9404 (không bind ra host):
```
ai-agent-router-server-master               9404/tcp, 0.0.0.0:9408->9408/tcp, :::9408->9408/tcp
ai-agent-master-server-master               9404/tcp, 0.0.0.0:9407->9407/tcp, :::9407->9407/tcp  
robot-ai-lesson-hoailb-dev                  9404/tcp, 0.0.0.0:9904->9904/tcp, :::9904->9904/tcp
```

**Phân biệt:**
- `0.0.0.0:9404->8000/tcp` = Port 9404 host → port 8000 container (đang sử dụng port 9404 trên host)
- `9404/tcp` = Container chỉ expose port 9404 nhưng KHÔNG bind ra host

### Để check cụ thể container nào đang dùng port 9404:
```bash
docker ps --format "table {{.Names}}\t{{.Ports}}" | grep 9404
```

Hoặc check port cụ thể:
```bash
lsof -i :9404
# hoặc
netstat -tulpn | grep 9404
```

Vậy **`studio-ai-platform-lesson-server-master`** là container đang thực sự sử dụng port 9404 trên host của bạn.